## 要件定義（機能要件 / 非機能要件）

### 前提

- 本リポジトリはモノレポ（`frontend/`と`backend/`）構成。
- 現状の実装はサンプル段階のため、本書は**実装ターゲットの要件**として記載する。

---

## 機能要件

### 1. オンボーディング（学習条件のヒアリング）

- **目標入力**: 例「3ヶ月でWebアプリを作れるように」「TOEIC 700」「基本情報合格」
- **期日/期間**: 期日固定、または「週○時間で最短」などのモード
- **現状レベル**: 自己申告 + 簡易診断（任意）
- **可処分時間**: 平日/休日の学習可能時間、曜日、継続の希望（毎日/隔日）
- **学習スタイル**: 動画/テキスト/ハンズオン/問題演習の嗜好
- **制約**: 苦手分野、使用できるデバイス、ネット環境、予算（有料教材の可否）

### 2. カリキュラム生成

- **出力形式**:
  - フェーズ（例: 基礎→応用→実践）
  - モジュール（分野単位）
  - レッスン（学習単位）
  - タスク（今日やること）
- **時間配分**: 週次計画、日次計画（学習負荷の平準化）
- **前提の埋め込み**: ゴール達成に必要な前提知識を自動補完
- **教材/リソース提案**: 無料/有料の推奨、難易度、所要時間、理由
- **成果物設計（任意）**: プロジェクトベース学習の場合、成果物の段階設計

### 3. 学習実行支援（デイリー体験）

- **今日のタスク**: 1〜3件の具体的タスク（「読む」「解く」「作る」）
- **質問/解説**: レッスン文脈に沿ったQ&A、例・比喩・分解説明
- **小テスト/チェック**: 理解度確認（選択式/記述式/穴埋め）
- **復習（間隔反復）**: 忘却曲線を考慮した自動復習スケジューリング
- **学習ログ**: 学習時間、完了/未完了、メモ、疑問点の記録

### 4. 進捗・習熟度の可視化

- **進捗**: 予定 vs 実績、完了率、滞留ポイント
- **習熟度**: モジュールごとの理解度（自己評価 + テスト結果）
- **到達見込み**: 現在ペースでの期日達成予測、調整提案

### 5. 適応的更新（再計画）

- **遅延時**: 期日維持のための圧縮（優先順位付け/範囲調整）
- **つまずき時**: 前提補強、復習増、教材差し替え、説明スタイル変更
- **前倒し時**: 追加課題、発展トピック、より難しい演習へ
- **ユーザー編集**: 手動でタスク/教材を差し替え→AIが全体整合を保って再最適化

### 6. リソース/知識ベース（任意）

- **教材カタログ**: URL/書籍/コースのメタ情報（難易度、タグ、所要時間）
- **推薦根拠**: なぜその教材が今のユーザーに適しているか（透明性）

---

## 非機能要件

### セキュリティ / プライバシー

- **個人情報の最小化**: 不要な個人情報を収集しない
- **プロンプト/ログ**: 学習内容・チャット履歴の扱い（保存/削除/匿名化）
- **秘密情報の取り扱い**: APIキー等はサーバー側で管理し、クライアントへ露出しない

### AI安全性

- **ガードレール**: 危険/違法/差別的/著作権侵害の要求を拒否
- **学習用途の誤情報**: 断定を避け、根拠/参照/不確実性を示す
- **学習者の主体性**: 代行ではなく支援（解答丸投げの抑制、ヒント設計）

### 信頼性 / 可用性

- **失敗時のフォールバック**: AI呼び出し失敗時の再試行、簡易テンプレ生成
- **スロットリング**: 連続生成/チャットのレート制限

### パフォーマンス

- **生成時間**: カリキュラム初回生成は許容数秒〜十数秒、日次更新は短時間を目指す
- **段階表示**: 長い生成はストリーミング/段階的レスポンス（将来）

### 運用性

- **観測**: エラー、レイテンシ、生成失敗率、ユーザー行動（匿名）を可視化
- **プロンプト/テンプレ管理**: バージョニング、A/Bテスト（将来）

---

## MVPスコープ（提案）

### MVPでやる

- オンボーディング（目標・期間・可処分時間・レベル）
- カリキュラム生成（週次計画 + 日次タスク）
- 進捗記録（完了/学習時間/メモ）
- 遅延時の再計画（簡易）

### MVPでは後回し

- 教材カタログの高度推薦（ベクトル検索/外部クローリング）
- 小テスト自動採点の高度化（記述式の厳密評価）
- チーム/クラス運用（教師・メンター機能）

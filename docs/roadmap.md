## ロードマップ（案）

本ロードマップは、`docs/requirements.md`を実装に落とすための段階計画です。
期間は目安で、チーム規模や優先度に合わせて調整します。

---

## フェーズ0: 基盤整備（〜1週）

- **APIの土台**
  - `backend`に`/v1`ルーティング、エラーフォーマット、バリデーション導入
  - CORS/セキュリティヘッダ等の最低限
- **永続化の導入**
  - DB選定（MVPはSQLiteでも可）
  - マイグレーション運用（ツール選定）
- **開発体験**
  - ローカル起動、環境変数、lint/format/typecheckの整備

---

## フェーズ1: MVP（2〜4週）

### 1-1. Goal作成（オンボーディング）

- Frontend: オンボーディングフォーム（目標/期日/学習時間/現状）
- Backend: `POST /v1/goals`, `GET /v1/goals`
- DB: `User`, `Goal`

### 1-2. カリキュラム生成（初回）

- Backend: `POST /v1/goals/:goalId/curriculums:generate`
  - まずはテンプレ生成でも可（LLMは後回し可）
- DB: `Curriculum`, `CurriculumItem`
- Frontend: カリキュラム閲覧（ツリー + 週次/日次の簡易表示）

### 1-3. 今日のタスク & ログ

- Backend: `GET /v1/goals/:goalId/today`, `POST /v1/study-logs`
- Frontend: 今日のタスク画面、完了チェック、学習時間/メモ入力
- 週次サマリー（期間集計）を簡易に表示

---

## フェーズ2: 適応（リプラン/理解度）（4〜8週）

- **リプラン**
  - `POST /v1/goals/:goalId/curriculums:replan`（新version作成）
  - 遅延/前倒し/制約変更に対応
- **チェック（小テスト）**
  - `GET /v1/curriculum-items/:itemId/check`
  - `POST /v1/checks/:checkId/attempts`
  - まずはMCQ中心
- **習熟度**
  - `Mastery`の更新（ログ/テストを根拠に）
  - UIで苦手領域を可視化

---

## フェーズ3: 学習支援の強化（8〜12週）

- **チャット（文脈付き）**
  - `POST /v1/conversations`, `POST /v1/.../messages`
  - 学習支援モード（ヒント→解説）
- **教材推薦**
  - `Resource`管理 + 推奨理由の提示
  - まずは手動登録 + AIの理由付け

---

## フェーズ4: スケール/運用（継続）

- **非同期生成**
  - ジョブキュー、進捗取得、失敗時リトライ
  - SSE等で段階表示
- **観測/品質**
  - 生成失敗率、レイテンシ、継続率のダッシュボード
  - プロンプト/テンプレのバージョン管理とA/Bテスト
- **セキュリティ**
  - 認証/認可、監査ログ、データ削除要求対応

---

## 実装の優先順位（最小の価値の塊）

1. **オンボーディング → 週次計画 → 今日のタスク**
2. **学習ログ**
3. **遅延時の再計画**
4. **チェック（小テスト）**
5. **文脈付きチャット**
